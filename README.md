## カスタムサンプルプラグイン
これは、Cobolアナライザー用のシンプルなSonarQubeプラグインの例です。本番環境では使用しないでください。

インストール方法：
1. お使いのSonarQubeインスタンスに同梱されているCOBOLアナライザーのバージョンを、このURLを使用して確認してください。 
http://<SONAR_HOST>:<SONAR_PORT>/api/plugins/installed  
最新の2025.5は、sonar-cobol-pluginバージョン 5.9.0.8697 と互換性があります。
2. ローカル開発用にCOBOLアナライザーをダウンロードします。  
https://binaries.sonarsource.com/?prefix=CommercialDistribution/sonar-cobol-plugin/
3. `pom.xml` を参照して、アナライザーを配置する場所を確認してください。
4. ```maven clean package``` を実行します。
5. 生成されたjarファイルをSonarの `<SONAR_HOME>/extensions/plugins` ディレクトリにコピーします。
6. 詳細については、こちらのドキュメントを参照してください。  
https://docs.sonarsource.com/sonarqube-server/latest/extension-guide/developing-a-plugin/plugin-basics/

# プラグイン開発時の注意点
- 各ルールごとに、キー (key)、重要度 (severity)、名前 (name) を必ず変更してください。
- 各ルールの修正に要する適切な工数 (effort time) を設定してください。
- ルールの説明用に、キーと一致する HTML ファイルを src/main/resources に配置する必要があります。
- Junit とサンプルの COBOL コードを使い、mvn test コマンドでローカルテストを実行してください。
- テストファイルは test/resources にあります。
- プラグインは、サーバーと同じ Java バージョンでコンパイルしてください。

# メインプラグイン
https://docs.sonarsource.com/sonarqube-server/analyzing-source-code/languages/cobol#custom-rules

# Javaドキュメント
https://javadocs.sonarsource.org/?prefix=cobol/apidocs
https://javadocs.sonarsource.org/cobol/apidocs/5.9.0.8697/index.html

# ASTエクスプローラー
これは、COBOLアナライザーによって生成された抽象構文木（Abstract Syntax Tree）をナビゲートするのに役立ちます。
https://binaries.sonarsource.com/?prefix=CommercialDistribution/sslr-cobol-toolkit/
このツールを実行するには、次のコマンドを実行します。
```
java -jar sslr-cobol-toolkit-<VERSION_NUMBER>.jar
```


## Custom Sample Plugin

This is an example of a simple SonarQube plugin for the Cobol analyzer. Do not use this for production


To install:
1. Check which version of COBOL analyzer your SonarQube instance is shipped with using this URL.  
``http://<SONAR_HOST>:<SONAR_PORT>/api/plugins/installed``  
The latest 2025.5 will be compatible with sonar-cobol-plugin version `5.9.0.8697`
2. Download the COBOL analyzer for local development.  
https://binaries.sonarsource.com/?prefix=CommercialDistribution/sonar-cobol-plugin/
3. Refer to the `pom.xml` as to where to place the analyzer
4. Run ```maven clean package```
5. Copy the jar file into Sonar `<SONAR_HOME>/extensions/plugins`
6. Refer to this documentation for more information  
https://docs.sonarsource.com/sonarqube-server/analyzing-source-code/languages/cobol#custom-rules


# What to look our for when developing the plugin
- Make sure you change key, severity and name for each rule
- There should be appropriate effort time needed for each rule remediation
- You need to place a relevant html file (matching the key) into `src/main/resources` for the rule description
- Use Junit and sample Cobol code to test locally with ``mvn test``
- Test files can be found in `test/resources`
- Make sure to compile the plugin with the same java version as your server

# Main plugin documentation
https://docs.sonarsource.com/sonarqube-server/latest/extension-guide/developing-a-plugin/plugin-basics/

# Java Documentation
https://javadocs.sonarsource.org/?prefix=cobol/apidocs 
https://javadocs.sonarsource.org/cobol/apidocs/5.9.0.8697/index.html

# AST Explorer
This will help navigate Abstract Syntax Tree generated by the COBOL analyzer
https://binaries.sonarsource.com/?prefix=CommercialDistribution/sslr-cobol-toolkit/
To run this tool, execute this command
```
java -jar sslr-cobol-toolkit-<VERSION_NUMBER>.jar
```
